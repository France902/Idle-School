<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animazione Palleggio PNG</title>
    
    <style>
        body {
            height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            overflow: hidden;
            background-color: #f0f0f0;
        }

        #personaggio {
            position: fixed;
            bottom: 150px;
            transform-origin: bottom center;
            transition: transform 0.2s ease-out, opacity 0.3s;
        }

        #palla {
            position: fixed;
            bottom: 190px;
            transform-origin: bottom center;
            transition: transform 0.2s ease-out, opacity 0.3s;
        }

        #personaggio {
            width: 30vh; 
            height: auto;
            z-index: 10; 
        }

        #palla {
            width: 20vh; 
            height: auto;
            left: 50%; 
            transform: translateX(-50%); 
            opacity: 0;
            margin-left: 13vh;
            z-index: 15;
        }

        /*ANIMAZIONI KEYFRAMES */

        @keyframes palleggio-aria {
            0%, 100% { 
                transform: translateY(0) translateX(-50%); 
            }
            50% { 
                transform: translateY(-30vh) translateX(-50%); 
            }
        }
        
        @keyframes dondolio-png {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(-15deg); }
        }

        .palleggia-attivo {
            animation: palleggio-aria 1.78s ease-in-out infinite; 
        }
        
        .dondolio-passivo {
             animation: dondolio-png 0.85s ease-in-out infinite alternate; 
        }
    </style>
</head>
<body>
    
    
    
    <img id="palla" src="pallone_calcio.png" alt="Palla da calcio">

    <img id="personaggio" src="Personaggio_anonimo.png" alt="Personaggio">
    
    <script defer>
        const personaggio = document.getElementById("personaggio");
        const palla = document.getElementById("palla");
        
        function randomDelay(min = 3000, max = 10000) {
            return Math.random() * (max - min) + min;
        }

        async function avviaPalleggio() {
            
            const ritardo = randomDelay();
            console.log(`Palla in arrivo tra ${Math.round(ritardo / 100) / 10} secondi.`);
            await new Promise(r => setTimeout(r, ritardo));
            
            palla.style.opacity = '1';

            await new Promise(r => setTimeout(r, 200)); 

            // Palleggio (10 secondi)         
            
            personaggio.classList.add('dondolio-passivo');
            
            palla.classList.add('palleggia-attivo');
            
            const durataPalleggio = 10000;
            await new Promise(r => setTimeout(r, durataPalleggio));

            //Stop Animazione

            palla.classList.remove('palleggia-attivo');
            palla.style.opacity = '0';
            
            personaggio.classList.remove('dondolio-passivo');
            
            console.log("Palleggio terminato. In attesa di un nuovo ritardo casuale...");
        }

        async function passiveAnimationStudent() {
            while (true) {
                await avviaPalleggio();
            }
        }
        
        document.addEventListener('DOMContentLoaded', passiveAnimationStudent);
    </script>
</body>
</html>
